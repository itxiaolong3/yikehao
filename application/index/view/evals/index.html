{include file="common:header" /}
</head>
<body>
<style>
    #online > div > s {
        background: url("__PUBLIC__static/index/images/kefu.png") center center no-repeat;
        background-color: #666;
    }

    body > iframe {
        opacity: 0;
        display: none;
    }
    *{margin:0;padding:0;margin: 0}
</style>
<div id="header2">
    <div>
        <div style="margin: 0 auto;width: 1200px;position: relative">您好&nbsp;{$uinfo.username}，欢迎来到云乐互联！
            {notempty name="uinfo"}
            <span onclick="loginout();" style="cursor: pointer;">【退出】</span>
            {/notempty}

            <p>
                <span><a class="link" target="_blank" href="http://wpa.qq.com/msgrd?v=3&uin={$baseinfo.kfqq}&site=qq&menu=yes">联系客服</a></span>
                <span><a>服务热线：</a><i>{$baseinfo.phone}</i></span>
            </p>
        </div>
    </div>

    <form method="get">
        <div>
            <div><img onclick="gethref(this)" hc-href="{:url('index/index/index')}" alt="公众号出售-公众号价格-公众号买卖-云乐互联公众号交易平台"
                      src="__PUBLIC__static/index/picture/logo.jpg" width="230" height="90">
                <div>
                    <em>
                        <input class="hc-input" hc-title name="title" placeholder="输入您需求的关键词，如“订阅号”">
                        <input type="text" value="搜索" id="dokeyword" class="hc-sub" style="color: #fff;padding-left: 30px;"/>
                    </em>
                    <ul>
                        {volist name="typetop" id="vo"}
                        <li><a style="color:#787878" href="{:url('index/deal/index',['tid'=>$vo.tid])}" class="link">{$vo.name}</a>
                        </li>
                        {/volist}
                    </ul>
                </div>
            </div>
        </div>
    </form>
</div>
<script>
    $(".hc-sub").click(function () {
        var _title = $("[hc-title]").val();
        var url="{:url('index/deal/index',['types'=>1,'keywords'=>'keys'])}";
        newurl=url.replace('keys',_title);
        window.location.href = newurl;

    })
    function loginout() {
        layer.load(0, {shade: false});
        $.post("{:url('index/index/loginout')}",{},function (e) {
            layer.msg('已退出');
            setTimeout(function () {
                window.location.reload();
            },1000)
        })
    }
</script>
<style>
    #header2 > div:first-child {
        z-index: 10;
    }

    @keyframes hot {
        0% {
            transform: translate(0, 0);
        }
        50% {
            transform: translate(0, -3px);
        }
        100% {
            transform: translate(0, 0);
        }
    }

    @-webkit-keyframes hot {
        0% {
            -webkit-transform: translate(0, 0);
        }
        50% {
            -webkit-transform: translate(0, -5px);
        }
        100% {
            -webkit-transform: translate(0, 0);
        }
    }
    .conts{
        width: 950px;height: 640px;background-image: url('__PUBLIC__static/index/images/zsbj.jpg');
        background-repeat:no-repeat; background-size:100% 100%;-moz-background-size:100% 100%;
        display: flex;
        justify-content: center;
        align-items: center;
    }
    .main{
        width: 42%;
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 50px;
    }
    .cont_right,.cont_left{
        list-style: none;
        width: 185px;
    }
    .cont_right li,.cont_left li{
        margin-top: 20px;
        text-align: center;
        font-size: 15px;
        font-weight: bold;
    }
    .right_li{
        font-weight: bold;!important;color: black;padding-bottom: 5px;
    }
    .left_li{
        font-weight: bold;!important;color: black;padding-bottom: 5px;
    }
    .cont_bt_right{
        position: absolute;
        top: 78%;
        right: 21%;
        padding: 15px;
        margin-left: 5px;
        background: #0c94eb;
        color: white;
    }
    .cont_bt_left{
        position: absolute;
        right: 21%;
        top: 84%;
        padding: 15px;
        margin-left: 5px;
        background: #5C72F6;
        color: white;
    }


</style>
<div id="header_nav2">
    <div class="mj-hv-total" style="position: relative;height: 70px">
        <ul>
            <li><a mj-hv-sh-none href="{:url('index/index/index')}" class="link">首页</a></li>
            <li style="margin:0;color: #fff;">|</li>
            <li><a mj-hv-sh href="{:url('index/deal/index')}" class="link">公众号转让</a></li>
            <li style="margin:0;color: #fff;">|</li>
            <li style="position: relative">
                <a mj-hv-sh-none href="{:url('index/sell/index')}">卖公众号</a>
            </li>
            <li style="margin:0;color: #fff;">|</li>
            <li><a mj-hv-sh-none href="{:url('index/deal/index')}">买公众号</a></li>
            <li style="margin:0;color: #fff;">|</li>
            <li style="position: relative">
                <a mj-hv-sh-none href="{:url('index/evals/index')}" class="link chooseit">帐号估值</a>
            </li>
            <li style="margin:0;color: #fff;">|</li>
            <li>
                <a mj-hv-sh-none href="{:url('index/aboutme/index')}" class="link">关于我们</a>
            </li>
            <li style="margin:0;color: #fff;">|</li>
            <li>
                <a mj-hv-sh-none href="{:url('index/addserver/index')}" class="link">增值服务</a>
            </li>
        </ul>
        <img src="__PUBLIC__static/index/picture/font1.png" style="margin-top: 9px;margin-left: 120px;">

        <!--账号选择条件悬浮框-->
        <div mj-cd id="select_box" class="mj-cd"
             style="display:none;position: absolute;left: 0;top:69px;z-index:10;width: auto;border: 4px solid #1F9EBF;border-top: 0">
            <!--    <div></div>-->
            <ul style="background: #fff">
                <li>
                    <s>公众号类型：</s>
                    <em>
                        <a class="link u" onclick="selectFour(this,type=1)">全部</a>
                        {volist name="haotype" id="vo"}
                        <a onclick="selectFour(this,type=1,'{$vo.htid}')" class="link ">{$vo.name}</a>
                        {/volist}
                    </em>
                </li>
                <li>
                    <s>公众号类目：</s>
                    <em>
                        <a onclick="selectFour(this,type=2)" class="link u">全部</a>
                        {volist name="alltype" id="vo"}
                        <a onclick="selectFour(this,type=2,'{$vo.tid}')" class="link ">{$vo.name}</a>
                        {/volist}

                    </em>
                </li>
                <li>
                    <s>价格区间：</s>
                    <em>
                        <a onclick="selectFour(this,type=3,'')" class="link">全部</a>
                        <a onclick="selectFour(this,type=3,1)" class="link">1万以内</a>
                        <a onclick="selectFour(this,type=3,2)" class="link">1-3万</a>
                        <a onclick="selectFour(this,type=3,3)" class="link">3-5万</a>
                        <a onclick="selectFour(this,type=3,4)" class="link">5-7万</a>
                        <a onclick="selectFour(this,type=3,5)" class="link">7-10万</a>
                        <a onclick="selectFour(this,type=3,6)" class="link">10-20万</a>
                        <a onclick="selectFour(this,type=3,7)" class="link">20万以上</a>
                    </em>
                </li>
                <li>
                    <s>认证类型：</s>
                    <em>
                        <a onclick="selectFour(this,type=4,3)" class="link u">不限</a>
                        <a onclick="selectFour(this,type=4,0)" class="link ">未认证</a>
                        <a onclick="selectFour(this,type=4,1)" class="link ">已认证</a>
                    </em>
                </li>
            </ul>
        </div>
    </div>
</div>
<script>
    function gethref(obj) {
        var is_open = $(obj).attr("is-open");
        var href = $(obj).attr("hc-href");
        // console.log(href);
        if (is_open == 1) {
            window.open(href);
        } else {
            window.location.href = href;
        }
    }

    $("[mj-hv-sh]").mouseover(function () {
        $("[mj-cd]").show();
        console.log($("[mj-cd]").height());
    })
    $("[mj-hv-sh-none],#header2").mouseover(function () {

        $("[mj-cd]").hide();
    })
    $(".mj-cd ul").mouseleave(function (event) {
        $("#header_nav2").hover(function () {
            event.preventDefault();
        })
        $("[mj-cd]").hide();

    })

    function selectFour(object, type, id) {
        var url = "{:url('index/deal/index')}";
        var string = $(object).html();
        console.log('string==' + string);
        var haotype = "";
        var fortype = "";
        var price = "";
        var isrz = "";

        if (type == 1) {
            haotype = id;
            url = url + '?type=' + haotype
        } else if (type == 2) {
            fortype = id;
            url = url + '?fortype=' + fortype
        } else if (type == 3) {
            price = id;
            url = url + '?price=' + price
        } else if (type == 4) {
            isrz = id;
            url = url + '?isrz=' + isrz
        }
        window.location.href = url;
    }
</script>

<!--主体-->
<!--估值-->
<div class="eva-div2">
    <div class="wrap" style="width: 1200px;margin: 0 auto">
        <p class="eva-p1">测测公众号的价值！</p>
        <p class="eva-p2">——30秒测出你在新媒体界的地位/身价——</p>
        <div class="eva-div2-div1">
            <div class="eva-div2-div2">
                <div class="eva-div2-div3">
                    <form id="f">

                        <p style="margin-top: 65px; clear: both; overflow: hidden;">
                            <span class="eva-div2-span1">公众号估价</span>
                            <span class="eva-div2-span2" id="allCount">累计有<label style="color:#4FB1CC;font-size: 17px;font-weight: bold;" id="donum">4668</label>位号主进行了公众号估价</span>
                        </p>
                        <p class="eva-div2-p1" style="margin-top:30px;">
                            <span class="eva-div2-span3">公众号名称:</span>
                            <input type="text" id="wxName" name="wxName" placeholder="输入您的公众号名称" class="eva-div2-input1"  value=""/>

                        </p>
                        <p class="eva-div2-p1">
                            <span class="eva-div2-span3">微&nbsp;&nbsp;信&nbsp;&nbsp;号:</span>
                            <input type="text" id="weixin" name="weixin" placeholder="输入您的公众号的微信号" class="eva-div2-input1" value=""/>
                        </p>
                        <p class="eva-div2-p1">
                            <span class="eva-div2-span3">粉丝数量:</span>
                            <input type="text" id="fansNum" name="fansNum" placeholder="输入您的公众号的粉丝数" class="eva-div2-input1" onkeyup="this.value=this.value.replace(/\D/g,'')" value=""/>
                        </p>
                        <p class="eva-div2-p1">
                            <span class="eva-div2-span3">头条阅读:</span>
                            <input type="text" id="readNum" name="readNum" placeholder="输入头条文章的平均阅读量" class="eva-div2-input1" onkeyup="this.value=this.value.replace(/\D/g,'')" value=""/>
                        </p>
                        <p class="eva-div2-p1">
                            <span class="eva-div2-span3">原创赞赏:</span>
                            <select id="isCreate" name="isCreate" class="eva-div2-select1">
                                <option value="0" >未开通原创</option>
                                <option value="1" >开通原创</option>
                            </select>
                            <select id="isAdmire" name="isAdmire" class="eva-div2-select1" style="margin-left: 2.9%;">
                                <option value="0" >未开通赞赏功能</option>
                                <option value="1" >开通赞赏功能</option>
                            </select>
                        </p>
                        <p class="eva-div2-p1">
                            <span class="eva-div2-span3">主体变更:</span>
                            <select id="mainChange" name="mainChange" class="eva-div2-select2">
                                <option value="1" >主体可以通过认证来变更</option>
                                <option value="0" >主体不可以通过认证来变更</option>
                            </select>
                        </p>
                    </form>
                </div>
                <div class="eva-div2-div4">
                    <img  mj-img src="__PUBLIC__static/index/picture/eva-bg1.png" class="eva-div2-img1" id="images"/>
                    <div class="eva-div2-div5">
                        <div class="eva-div2-div6">
                            <div class="eva-div2-div7 evaBg" >
                                <p class="eva-div2-p3" style="cursor: pointer">
                                    <a onclick="addEvaluate();" href="javascript:void(0)" style="color: white;">
                                        <span class="eva-div2-span4">开始</span>
                                        <span class="eva-div2-span4">估价</span>
                                    </a>

                                </p>
                            </div>
                        </div>
                        <p class="eva-div2-p2">点击立即估价!</p>
                    </div>
                </div>
            </div>
            <div id="contbox" class="conts" style="display: none;">
                <div class="main">
                    <div class="cont_right">
                        <ul>
                            <li class="right_li">公众号微信号</li>
                            <li>粉丝数量</li>
                            <li>头条阅读</li>
                            <li>原创功能</li>
                            <li>主体变更</li>
                        </ul>
                    </div>
                    <div class="cont_left">
                        <ul>
                            <li class="left_li" id="wxnamevalue">cjl1835444444</li>
                            <li id="sfnums">1540</li>
                            <li id="toutiaonum">400</li>
                            <li id="yuanc">已开通</li>
                            <li id="changzt">主体可通过认证来变更</li>
                        </ul>
                        <div style="position: absolute;margin-top: 50px;right: 48%;">
                            <div>
                                <span style="font-size: 23px;height: 20px;line-height: 32px;">
                                市场价值：<label style="font-size: 35px;color: red;margin-bottom: 10px;" id="guzhiprice">5000.00</label>
                                </span>
                                <span style="font-size: 23px;height: 20px;line-height: 32px;margin-left: 20px;">
                                世界排名：<label style="font-size: 35px;color: #AD7617;margin-bottom: 10px;" id="wordorder">2515</label>
                                </span>
                            </div>
                        </div>

                    </div>
                </div>
                <div style="height: 100%;width: 30%;">
                    <div class="cont_bt_right">
                        <a id="down1" href="" download="downImg" style="color:white;cursor: pointer" >下载到本地</a>
                    </div>
                    <div class="cont_bt_left">
                        <a href="{:url('index/sell/index')}" style="color:white;cursor: pointer">返回购买页</a>
                    </div>
                </div>

            </div>

        </div>
    </div>
</div>
<script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
<script src="https://cdn.bootcss.com/html2canvas/0.4.1/html2canvas.js"></script>
<script>
    //以下是截图代码
    $(function(){
        $('.conts').hide();
    });
    function showdown() {
        var he=$("#contbox").height();
        var wh=$("#contbox").width();
        html2canvas($("#contbox"), {
            height: he + 520,
            width: wh + 448  ,
            onrendered: function(canvas) {
                //将canvas画布放大若干倍，然后盛放在较小的容器内，就显得不模糊了
                var timestamp = Date.parse(new Date());
                //把截取到的图片替换到a标签的路径下载
                $("#down1").attr('href',canvas.toDataURL());
                //下载下来的图片名字
                $("#down1").attr('download',timestamp + '.png') ;
                //document.body.appendChild(canvas);
            }
            //可以带上宽高截取你所需要的部分内容
        });
    }
</script>
<script>
    var wxName;
    var wxData;
    var fansData;
    var readData;
    var createData;
    var admireData;
    var mcData;
    var gfData;
    var minMoney = 0;//最小估值
    var maxMoney = 1;//最大估值
    var isyuanc;
    var zhuti;
    $("#donum").text(rnd(1000,9999));
    $(function() {
        $(".cur1").removeClass("cur1");
        $("#evaluatePage").addClass("cur1");

        $("#sellgzh").removeAttr("disabled");

        /*......鍏憡婊氬姩......*/
        var $this = $(".news");
        var scrollTimer;
        $this.hover(function(){
            clearInterval(scrollTimer);
        },function(){
            scrollTimer = setInterval(function(){
                scrollNews( $this );
            }, 3000 );
        }).trigger("mouseout");


        //浼颁环鎸夐挳


        $('.eva3-div1-btn2').mouseenter(function(){
            $(this).addClass('colorBtn1');
        })
        $('.eva3-div1-btn2').mouseleave(function(){
            $(this).removeClass('colorBtn1');
        })

        $('.eva3-div1-btn3').mouseenter(function(){
            $(this).addClass('colorBtn2');
        })
        $('.eva3-div1-btn3').mouseleave(function(){
            $(this).removeClass('colorBtn2');
        })

        $('.eva3-div1-btn4').mouseenter(function(){
            $(this).addClass('colorBtn3');
        })
        $('.eva3-div1-btn4').mouseleave(function(){
            $(this).removeClass('colorBtn3');
        })

    });
    /*......鍏憡婊氬姩......*/
    function scrollNews(obj){
        var $self = obj.find("ul:first");
        var lineHeight = $self.find("li:first").height();
        $self.animate({ "margin-top" : -lineHeight +"px" },4000 , function(){
            $self.css({"margin-top":"0px"}).find("li:first").appendTo($self);
        })
    }

    function addEvaluate(){
        var flag=true;
        //获取估值参数
        wxName = $("#wxName").val();
        wxData = $("#weixin").val();
        fansData = $("#fansNum").val();
        readData = $("#readNum").val();
        createData = $("#isCreate :selected").val();
        admireData = $("#isAdmire :selected").val();
        isyuanc=$("#isCreate :selected").text()+","+$("#isAdmire :selected").text();
        mcData = $("#mainChange :selected").val();
        zhuti = $("#mainChange :selected").text();
        //微信号
        var wxmpNumFlag =checkwx(wxData);

        if (wxmpNumFlag != "ok") {
            layer.open({
                content: '微信号不正确',
                skin: 'msg',
                time: 2,
            });
            $("#sellgzhTwo").removeAttr("disabled");
            flag=false;
        }
        if(wxName==""){
            layer.open({
                content: '请填写公众号名称',
                skin: 'msg',
                time: 2,
            });
            flag=false;
        }
        var fansFlag = checkfs(fansData);
        if (fansFlag != "ok") {
            layer.open({
                content: '粉丝数不正确',
                skin: 'msg',
                time: 2,
            });
            flag=false;
        }
        // readNum
        var readNumFlag = checktt(readData);
        if (readNumFlag != "ok") {
            layer.open({
                content: '头条阅读数',
                skin: 'msg',
                time: 2,
            });
            flag=false;
        }
        if(createData==null||createData==''){
            layer.tips("请选择原创赞赏", '#isCreate', {
                tips: [2, '#0FA6D8'],
                tipsMore: true
            });
            flag=false;
        }
        if(admireData==null||admireData==''){
            layer.tips("选择是否开通赞赏功能", '#isAdmire', {
                tips: [2, '#0FA6D8'],
                tipsMore: true
            });
            flag=false;
        }
        if(mcData==null||mcData==''){
            layer.tips("主体变更情况", '#mainChange', {
                tips: [2, '#0FA6D8'], //
                tipsMore: true
            });
            flag=false;
        }
        if(flag){
            //开始估值
            valuation(fansData, createData);
            $("#guzhiprice").text((Math.round(minMoney)+Math.round(maxMoney))/2);
            $("#wxnamevalue").text(wxName);
            $("#sfnums").text(fansData);
            $("#toutiaonum").text(readData);
            $("#yuanc").text(isyuanc);
            $("#changzt").text(zhuti);
            $("#wordorder").text(rnd(9999,99999));

            $(".eva-div2-div2").hide();
            showdown();
            $(".conts").show();
            var _total=parseInt($("#allCount font").text());
            $("#allCount font").text(_total+1);

        }
    }
    //检查微信
    function checkwx(wx) {
        if(wx==''|| $.trim(wx).length<1){
            return "微信号不可以为空";
        }
        return "ok";
    }
    //检查粉丝量
    function checkfs(code) {
        if(code==''|| $.trim(code).length==0){
            $("input[name='fans']").val("");
            $("input[name='fans']").focus();
            return "粉丝量不正确";
        }
        //[1-9][0-9]{4,12}
        if(!code.match(/^[1-9][0-9]{0,8}$/)){
            $("input[name='fans']").val("");
            $("input[name='fans']").focus();
            return 	"粉丝量不正确";
        }
        return "ok";
    }
    //检查头条
    function checktt(code) {
        if(code==''|| $.trim(code).length==0){
            $("input[name='readNum']").val("");
            $("input[name='readNum']").focus();
            return "璇锋偍杈撳叆鍏紬鍙峰钩鍧囨湀闃呰鏁伴噺";
        }
        //[1-9][0-9]{4,12}
        if(!code.match(/^[1-9][0-9]{0,7}$/)){
            $("input[name='readNum']").val("");
            $("input[name='readNum']").focus();
            return 	"鎮ㄨ緭鍏ョ殑闃呰鏁伴噺鏍煎紡鏈夎锛岃閲嶆柊杈撳叆";
        }
        return "ok";
    }
    //随机数
    function rnd(n, m){
        var random = Math.floor(Math.random()*(m-n+1)+n);
        return random;
    }
    /**
     * 估值方法
     * @param fansData 粉丝数量
     * @param readData 阅读量
     * @param createData 原创赞赏
     * @param admireData 是否开通赞赏功能
     * @param mcData 主体变更情况
     * @param gfData 粉丝组成情况
     */
    function valuation(fansData, createData) {

        //访问比例
        //var uvPercent = UVPercent(fansData, readData);
        console.log('得到的'+fansData+'--'+createData)
        //原创赞赏赞赏情况
        if (createData == 0) {
            createData = 0.9;
        } else if (createData == 1) {
            createData = 1.2;
        }

        //最大值和最小值
        var min = fansData * 0.5;
        var max = fansData * 0.8;

        //估值结果
        minMoney = min * createData;
        maxMoney = max * createData;

    }

    /**
     * 访问比例
     * @param fansNum
     * @param readNum
     * @constructor
     */
    function UVPercent(fansNum, readNum) {

        var percent = readNum / fansNum * 100;
        var reNum = 0;
        if (percent <= 3) {
            reNum =  0.4;
        } else if (percent > 3 && percent <= 5) {
            reNum =  0.5;
        } else if (percent > 5 && percent <= 7) {
            reNum =  0.7;
        } else if (percent > 7 && percent <= 8) {
            reNum =  0.8;
        } else if (percent > 8 && percent <= 10) {
            reNum =  1;
        } else if (percent > 10 && percent <= 12) {
            reNum =  1.05;
        } else if (percent > 12 && percent <= 15) {
            reNum =  1.1;
        } else if (percent > 15 && percent <= 20) {
            reNum =  1.3;
        } else if (percent > 20 && percent <= 25) {
            reNum =  1.35;
        } else if (percent > 25 && percent <= 30) {
            reNum =  1.4;
        } else if (percent > 30) {
            reNum =  1.5;
        }
        return reNum;
    }

</script>
<script>

</script>
<!--尾部-->
{include file="common:foot" /}
          